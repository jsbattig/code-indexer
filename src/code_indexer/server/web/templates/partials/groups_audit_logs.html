<table class="audit-logs-table">
    <thead>
        <tr>
            <th>Timestamp</th>
            <th>Admin</th>
            <th>Action</th>
            <th>Target Type</th>
            <th>Target ID</th>
            <th>Details</th>
        </tr>
    </thead>
    <tbody>
        {% if audit_logs %}
        {% for log in audit_logs %}
        <tr>
            <td class="timestamp-cell">{{ log.timestamp }}</td>
            <td>{{ log.admin_id }}</td>
            <td>
                <span class="action-badge action-{{ log.action_type | replace('_', '-') }}">
                    {{ log.action_type | replace('_', ' ') | title }}
                </span>
            </td>
            <td>{{ log.target_type | title }}</td>
            <td>{{ log.target_id }}</td>
            <td class="details-cell">
                {% if log.details %}
                <details>
                    <summary>View Details</summary>
                    <pre>{{ log.details }}</pre>
                </details>
                {% else %}
                <span class="text-muted">-</span>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
        {% else %}
        <tr>
            <td colspan="6" class="no-data">No audit log entries found.</td>
        </tr>
        {% endif %}
    </tbody>
</table>

{% if total_count is defined and total_count > 0 %}
<div class="pagination-info">
    Showing {{ audit_logs | length }} of {{ total_count }} entries
</div>
{% endif %}

<style>
.audit-logs-table {
    width: 100%;
}

.audit-logs-table th,
.audit-logs-table td {
    text-align: left;
    padding: 0.5rem;
}

.timestamp-cell {
    white-space: nowrap;
    font-family: monospace;
    font-size: 0.875rem;
}

.action-badge {
    display: inline-block;
    padding: 0.125rem 0.5rem;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    font-weight: 500;
}

.action-user-group-change {
    background-color: #3b82f6;
    color: white;
}

.action-repo-access-grant {
    background-color: #22c55e;
    color: white;
}

.action-repo-access-revoke {
    background-color: #ef4444;
    color: white;
}

.action-group-create {
    background-color: #8b5cf6;
    color: white;
}

.action-group-update {
    background-color: #f59e0b;
    color: white;
}

.action-group-delete {
    background-color: #dc2626;
    color: white;
}

.details-cell {
    max-width: 300px;
}

.details-cell details {
    margin: 0;
}

.details-cell summary {
    cursor: pointer;
    color: var(--pico-primary);
    font-size: 0.875rem;
}

.details-cell pre {
    margin: 0.5rem 0 0 0;
    padding: 0.5rem;
    background: var(--pico-card-background-color);
    border-radius: 0.25rem;
    font-size: 0.75rem;
    overflow-x: auto;
    white-space: pre-wrap;
    word-break: break-word;
}

.text-muted {
    color: var(--pico-muted-color);
}

.no-data {
    text-align: center;
    color: var(--pico-muted-color);
    padding: 2rem;
}

.pagination-info {
    text-align: right;
    font-size: 0.875rem;
    color: var(--pico-muted-color);
    padding: 1rem 0;
}
</style>
